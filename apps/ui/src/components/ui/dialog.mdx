import { Meta, Story } from '@storybook/blocks';
import * as DialogStories from './dialog.stories';

<Meta of={DialogStories} />

# Dialog

A modal dialog component built on Radix UI primitives. Provides accessible modal dialogs with overlay, animations, and keyboard navigation.

## Overview

The Dialog component is a composite component that includes multiple subcomponents for building modal dialogs:

- `Dialog` - Root component that manages dialog state
- `DialogTrigger` - Button or element that opens the dialog
- `DialogContent` - The main dialog container
- `DialogHeader` - Header section with title and description
- `DialogTitle` - Dialog title (required for accessibility)
- `DialogDescription` - Optional dialog description
- `DialogFooter` - Footer section for actions
- `DialogClose` - Close button component

## Props

### Dialog (Root)

The root Dialog component accepts all props from Radix UI Dialog.Root:

| Prop | Type | Default | Description |
|------|------|---------|-------------|
| `open` | `boolean` | `undefined` | Controlled open state |
| `defaultOpen` | `boolean` | `false` | Uncontrolled default open state |
| `onOpenChange` | `(open: boolean) => void` | `undefined` | Callback when open state changes |
| `modal` | `boolean` | `true` | Whether dialog is modal (blocks interaction) |

### DialogContent

| Prop | Type | Default | Description |
|------|------|---------|-------------|
| `className` | `string` | `undefined` | Additional CSS classes |
| `children` | `ReactNode` | `undefined` | Dialog content |

### DialogHeader, DialogFooter

| Prop | Type | Default | Description |
|------|------|---------|-------------|
| `className` | `string` | `undefined` | Additional CSS classes |
| `children` | `ReactNode` | `undefined` | Header/footer content |

### DialogTitle, DialogDescription

| Prop | Type | Default | Description |
|------|------|---------|-------------|
| `className` | `string` | `undefined` | Additional CSS classes |
| `children` | `ReactNode` | `undefined` | Title/description text |

## Usage Examples

### Basic Dialog

```tsx
<Dialog>
  <DialogTrigger asChild>
    <Button>Open Dialog</Button>
  </DialogTrigger>
  <DialogContent>
    <DialogHeader>
      <DialogTitle>Are you sure?</DialogTitle>
      <DialogDescription>
        This action cannot be undone.
      </DialogDescription>
    </DialogHeader>
    <DialogFooter>
      <Button variant="outline">Cancel</Button>
      <Button variant="destructive">Confirm</Button>
    </DialogFooter>
  </DialogContent>
</Dialog>
```

### Controlled Dialog

```tsx
const [open, setOpen] = useState(false);

<Dialog open={open} onOpenChange={setOpen}>
  <DialogTrigger asChild>
    <Button>Open</Button>
  </DialogTrigger>
  <DialogContent>
    <DialogHeader>
      <DialogTitle>Controlled Dialog</DialogTitle>
    </DialogHeader>
  </DialogContent>
</Dialog>
```

### Dialog with Form

```tsx
<Dialog>
  <DialogTrigger asChild>
    <Button>Edit Profile</Button>
  </DialogTrigger>
  <DialogContent className="sm:max-w-[425px]">
    <DialogHeader>
      <DialogTitle>Edit Profile</DialogTitle>
      <DialogDescription>
        Make changes to your profile here.
      </DialogDescription>
    </DialogHeader>
    <form className="grid gap-4 py-4">
      <div className="grid gap-2">
        <Label htmlFor="name">Name</Label>
        <Input id="name" />
      </div>
    </form>
    <DialogFooter>
      <Button type="submit">Save</Button>
    </DialogFooter>
  </DialogContent>
</Dialog>
```

## Design Guidelines

### Accessibility

- Always include a `DialogTitle` for screen reader support
- Use `DialogDescription` to provide context
- The close button is automatically included in `DialogContent`
- Dialog traps focus and manages keyboard navigation automatically

### Styling

- Dialog is centered by default with max-width constraints
- Use `className` prop to customize width: `className="sm:max-w-[500px]"`
- Overlay uses `bg-black/80` with fade animations
- Content has slide and zoom animations on open/close

### Best Practices

1. **Keep dialogs focused**: One primary action per dialog
2. **Clear titles**: Use descriptive titles that explain the dialog's purpose
3. **Escape to close**: Users can press Escape to close (handled automatically)
4. **Click outside**: Clicking overlay closes dialog (can be disabled with `modal={false}`)
5. **Form handling**: For forms, handle submission in `DialogFooter` buttons

## Composition

The Dialog component uses a compound component pattern. Always structure your dialogs as:

```
Dialog (root)
├── DialogTrigger (optional, opens dialog)
└── DialogContent
    ├── DialogHeader
    │   ├── DialogTitle (required)
    │   └── DialogDescription (optional)
    ├── [Your content]
    └── DialogFooter (optional)
        └── [Action buttons]
```

<Story of={DialogStories.Default} />

<Story of={DialogStories.WithForm} />

<Story of={DialogStories.Simple} />
